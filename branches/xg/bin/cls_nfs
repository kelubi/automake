#!/bin/sh

declare -a closelist
closelist=(
cpuspeed 
gpm 
lvm2-monitor
mdmonitor 
nfslock
netfs 
portmap
rpcgssd 
rpcidmapd 
smartd
xfs 
)

for((count=0,i=0;count<${#closelist[@]};i++))
do
    chkconfig --list | grep ${closelist[i]}
    if [ $? -eq 0 ]; then
        cmd="chkconfig ${closelist[i]} --level 3 off"
        echo $cmd
        `$cmd`
    fi
    let count+=1
done

